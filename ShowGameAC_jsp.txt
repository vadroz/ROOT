<%@ page import="worldcup.ShowGameAC, worldcup.ShowDateGameAC, java.util.*, java.text.*"%>
<%
    ShowGameAC game = new ShowGameAC();
    int iNumOfLg = game.getNumOfLg();
    String [] sLgStr = game.getLgStr();
    String [] sLgSales = game.getLgTySls();

    game.disconnect();

    String sDate = request.getParameter("selDate");
    if (sDate == null)
    {
      Date date;
      SimpleDateFormat df = new SimpleDateFormat("MM/dd/yyyy");
      Calendar cal = Calendar.getInstance();
      cal.add(Calendar.DATE, -1);
      date = cal.getTime();
      sDate = df.format(date);
    }

    ShowDateGameAC dategame = new ShowDateGameAC(sDate);

    int iNumOfPlr = dategame.getNumOfPlr();
    String [] sPlrLg = dategame.getPlrLg();
    String [] sPlrSales = dategame.getPlrSales();

    int [] iNumOfStr = dategame.getNumOfStr();
    String [][] sStr = dategame.getStr();
    String [][] sStrSales = dategame.getStrSales();
    dategame.disconnect();
%>

<html>
<head>

<!-- --------------- Date Selection prompt ----------------------- -->
<script LANGUAGE="JavaScript1.2" src="Calendar.js">
</script>


<style>body {background:white;}
        a:link { color:blue} a:visited { color:blue}  a:hover { color:blue}
        table.DataTable { border: darkred solid 1px;background:#FFE4C4;text-align:center;}
        th.DataTable { background:#FFCC99;padding-top:3px; padding-bottom:3px;
                       padding-right:3px; padding-left:3px;
                       border-bottom: darkred solid 1px;border-right: darkred solid 1px;text-align:center; font-family:Verdanda; font-size:12px }
        td.DataTable { background:lightgrey; padding-top:3px; padding-bottom:3px;
                       padding-right:3px; padding-left:3px;
                       border-bottom: darkred solid 1px; border-right: darkred solid 1px;
                       text-align:left; font-family:Arial; font-size:10px }
        td.DataTable1 { background:lightgrey; padding-top:3px; padding-bottom:3px;
                       padding-right:3px; padding-left:3px;
                       border-bottom: darkred solid 1px; border-right: darkred solid 1px;
                       text-align:right; font-family:Arial; font-size:10px }
        td.DataTable2 { background:cornsilk; padding-top:3px; padding-bottom:3px;
                       padding-right:3px; padding-left:3px;
                       border-bottom: darkred solid 1px; border-right: darkred solid 1px;
                       text-align:center; font-family:Arial; font-size:10px }
        td.DataTable3 { background:azure; padding-top:3px; padding-bottom:3px;
                       padding-right:3px; padding-left:3px;
                       border-bottom: darkred solid 1px; border-right: darkred solid 1px;
                       text-align:center; font-family:Arial; font-size:10px }
        td.DataTable4 { background:azure; padding-top:3px; padding-bottom:3px;
                       padding-right:3px; padding-left:3px;
                       border-bottom: darkred solid 1px; border-right: darkred solid 1px;
                       text-align:right; font-family:Arial; font-size:10px }

        td.Grid { text-align:center;}


        p.reg {text-align:center; font-family:Arial; font-size:10px}

</style>


<SCRIPT language="JavaScript">
//--------------- Global variables -----------------------
//--------------- End of Global variables -----------------------
function bodyLoad(){
  // populate date with yesterdate
      doSelDate();
}
// populate date with yesterdate
function  doSelDate(){
  var da = document.all;
  var date = new Date(new Date() - 86400000);
  da.selDate.value = (date.getMonth()+1) + "/" + date.getDate() + "/" + date.getFullYear()
}

// Validate form
  function Validate(form){
    var msg;
    var vld = new Date(document.forms[0].selDate.value)
    var minYear=2005
    var maxYear= 2005;
    var error = false;


  if (document.forms[0].selDate.value == null
  || (new Date(vld)) == "NaN")
  {
    msg = " Please, enter report date\n"
    error = true;
  }
  else {document.forms[0].selDate.value = (vld.getMonth()+1) + "/" + vld.getDate() + "/" + vld.getFullYear()}

  if (vld.getFullYear() < minYear){
    msg = vld.getFullYear() + " is less that minimum year allowed\n"
    error = true;
  }
  if (vld.getFullYear() > maxYear){
    msg = vld.getFullYear() + " is greater that maximum year allowed\n"
    error = true;
  }

  if (error) alert(msg);
    return error == false;
  }
// Validate numeric fields
  function isNum(str) {
  if(!str) return false;
  for(var i=0; i < str.length; i++){
    var ch=str.charAt(i);
    if ("0123456789".indexOf(ch) ==-1) return false;
  }
  return true;
}

</SCRIPT>

</head>
<!-------------------------------------------------------------------->
<body onload="bodyLoad();">
<div id="tooltip2" style="border: black solid 3px; position:absolute;visibility:hidden;background-color:LemonChiffon; z-index:10"></div>

    <table border="0" width="100%" height="100%" cellPadding="0" cellSpacing="0">
     <tr>
      <td ALIGN="center" VALIGN="TOP" colspan="3">
       <b>Sun & Ski Sports<br>
        <br><h3>Aged Inventory Sales Contest</h3>
       </b>
     </tr>
<!-------------------------------------------------------------------->
      <tr>
      <td><img src="Antique1.jpg" width="100" height="70"></td>
      <td class="Grid" width="60%">

      <!----------------- Leage ------------------------>
      <table class="DataTable" cellPadding="0" cellSpacing="0">
         <tr>
           <th class="DataTable" >Team</th>
           <th class="DataTable" >Sales</th>
         </tr>
         <%for(int i=0; i < iNumOfLg; i++ ){%>
           <tr>
             <td class="DataTable" ><%=sLgStr[i]%></td>
             <td class="DataTable1" >$<%=sLgSales[i]%></td>
           </tr>
         <%}%>
       </table>
     </td>
     <td><img src="Antique2.jpg" width="110" height="70"></td>
     </tr>
     <!-------------------------------------------------------------------->
      <tr>
      <td><img src="Antique3.jpg" width="100" height="80"></td>
      <td class="Grid" width="60%">
       <br>

      <!----------------- Leage 1 of table ------------------------>
      <table class="DataTable" cellPadding="0" cellSpacing="0">
         <tr>
           <th class="DataTable" >Team</th>
           <th class="DataTable" >Sales</th>
         </tr>
         <%
           for(int i=0; i < iNumOfPlr; i++ ){%>
           <tr>
             <td class="DataTable3" ><%=sPlrLg[i]%></td>
             <td class="DataTable4" >$<%=sPlrSales[i]%></td>
           </tr>
           <!----------------- Store Sales ------------------------>
           <%for(int j=0; j < iNumOfStr[i]; j++ ){%>
             <tr>
                <td class="DataTable">Store: <%=sStr[i][j]%></td>
                <td class="DataTable1" >$<%=sStrSales[i][j]%></td>
             </tr>
           <%}%>
          <!----------------- End Store Sales --------------------->
         <%}%>
       </table>
     </td>
     <td><img src="Antique4.jpg" width="100" height="70"></td>
     </tr>

      <!----------------------- end of Players table ------------------------>
     <tr>
      <td class="Grid" colspan="3">
       <form  method="GET" action="ShowGameAC.jsp" onSubmit="return Validate(this)">
          <br><font size="-1">Click here to view a single day point standings:
          <input name="selDate" type="text" size=10 maxlength=10>
          <a href="javascript:showCalendar(1, null, null, 300, 250, null)" >
              <img src="calendar.gif" alt="Calendar Prompt" width="34" height="21"></a>&nbsp;&nbsp;&nbsp;
          <INPUT type=submit value=Submit name=SUBMIT></font>
      </form>

        <a href="../"><font color="red" size="-1">Home</font></a>&#62;
        <font size="-1">This page</font>
    </td>
   </tr>
  </table>
 </body>
</html>
